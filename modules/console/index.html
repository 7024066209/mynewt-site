<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://mynewt.incubator.apache.org/modules/console/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Console - Mynewt Testing</title>

        <link href="../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/custom.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,700,900,300,100' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link href="../../extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-72162311-1', 'mynewt.incubator.apache.org');
                ga('send', 'pageview');
            </script>
        
    </head>


    <body class="Console">


        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="logo-container">
        <img src="http://mynewt.incubator.apache.org/img/logo.svg">
    </div>
    <div class="container-fluid">
        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="http://mynewt.incubator.apache.org/">Home</a>
                </li>
                <li>
                    <a href="http://mynewt.incubator.apache.org/documentation/">Docs</a>
                </li>
                <li>
                    <a href="http://mynewt.incubator.apache.org/download/">Download</a>
                </li>
                <li>
                    <a href="http://mynewt.incubator.apache.org/community/">Community</a>
                </li>
                <li>
                    <a href="http://mynewt.incubator.apache.org/events/">Events</a>
                </li>
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
            </ul>
        </div>
    </div>
</div>

        <div class="container-fluid">
            
                <div class="row sm-extra-padding">
                    <div class="col-md-3 bg-grey sidebar-container"><div class="bs-sidebar hidden-print" role="complementary">    
    <div class="sidebar-top">
        <img class="hidden-xs hidden-sm logo-small" src="http://mynewt.incubator.apache.org/img/logo.svg" alt="MyNewt" title="MyNewt">
        <div class="small" role="search">
            <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
                <div class="form-group">
                    <input type="text" name="q" placeholder="Search documentation" />
                    <button class="search-button" type="submit"><i class="fa fa-search"></i></button>
                </div>
            </form>
        </div>
    </div>
    <ul class="nav bs-sidenav">
        
            
        
            
        
            
        
            
        
            
        
            
                <li class="main"><a href="../../get_started/newt_concepts/">Chapter 1 - Get Started</a></li>
                
            
        
            
                <li class="main"><a href="../../get_acclimated/vocabulary/">Chapter 2 - Get Acclimated</a></li>
                
            
        
            
                <li class="main"><a href="../../newt/newt_ops/">Chapter 3 - Newt Tool</a></li>
                
            
        
            
                <li class="main"><a href="../../os/mynewt_os/">Chapter 4 - Mynewt OS</a></li>
                
            
        
            
                <li class="main"><a href="./">Chapter 5 - Modules</a></li>
                
                    <ul class="current-toc">
                        
                            <li class="toctree-l3"><a href="./">Console</a></li>
                            
                        
                            <li class="toctree-l3"><a href="../shell/">Shell</a></li>
                            
                        
                            <li class="toctree-l3"><a href="../bootloader/">Bootloader</a></li>
                            
                        
                            <li class="toctree-l3"><a href="../filesystem/">File System</a></li>
                            
                        
                            <li class="toctree-l3"><a href="../testutil/">Test Utilities</a></li>
                            
                        
                    </ul>
                
            
        
            
                <li class="main"><a href="../../packaging/dist/">Chapter 6 - Packaging it</a></li>
                
            
        
    </ul>
</div></div>
                    
                    <div class="show-sidebar-container">
                        <button class="show-sidebar">Docs Menu</button>
                    </div>
                    
                    <div class="col-md-9 documentation-viewer" role="main">
                        <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Chapter 5 - Modules &raquo;</li>
        
      
    
    <li>Console</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
                        
                            <h1 id="console">Console<a class="headerlink" href="#console" title="Permanent link">&para;</a></h1>
<p>The console is an operating system window where users interact with system programs of the operating system or a console application by entering text input (typically from a keyboard) and reading text output (typically on the computer terminal or monitor). The text written on the console brings some information and is a sequence of characters sent by the OS or programs running on the OS. </p>
<p>Support is currently available for console access via the serial port on the hardware board.</p>
<h2 id="description">Description<a class="headerlink" href="#description" title="Permanent link">&para;</a></h2>
<p>In the Mynewt OS, the console library comes in two versions:</p>
<ul>
<li>full - containing the full implementation</li>
<li>stub - containing stubs for the API</li>
</ul>
<p>If an egg or project requires the full console capability it lists that dependency in its egg.yml file. For example, the shell egg is defined by the following egg.yml file:</p>
<pre><code>egg.name: libs/shell 
egg.vers: 0.1
egg.deps:
    - libs/console/full
    - libs/os
egg.identities:
    - SHELL
</code></pre>
<p>On the other hand, a project may not have a physical console (e.g. a UART port to connect a terminal to) but may have a dependency on an egg that has console capability. In that case you would use a console stub. Another example would be the bootloader project where we want to keep the size of the image small. It includes the <code>libs/os</code> egg that can print out messages on a console (e.g. if there is a hard fault) and the <code>libs/util</code> egg that uses full console (but only if SHELL is present to provide a CLI). However, we do not want to use any console I/O capability in this particular bootloader project to keep the size small. We simply use the console stub instead and the egg.yml file for the project boot egg looks like the following:</p>
<pre><code>project.name: boot
project.identities: bootloader
project.eggs:
    - libs/os
    - libs/bootutil
    - libs/nffs
    - libs/console/stub
    - libs/util
</code></pre>
<h2 id="data-structures">Data structures<a class="headerlink" href="#data-structures" title="Permanent link">&para;</a></h2>
<p>Console interaction is intrinsically composed of two unidirectional systems. The console implementation uses two ring buffers containing input (receive) and output (transmit) characters, respectively. Read and write operations on the console_ring structure are managed by labeling the read location indicator the <code>cr_tail</code> and the write location indicator the <code>cr_head</code>. The console ring length is variable and is specified as the <code>cr_size</code> member of the data structure. <code>cr_buf</code> is the pointer to the actual array of data contained.</p>
<pre><code>struct console_ring {
  32     uint8_t cr_head;
  33     uint8_t cr_tail;
  34     uint8_t cr_size;
  35     uint8_t _pad;
  36     uint8_t *cr_buf;
  37 }
</code></pre>

<pre><code>struct console_tty {
  40     struct console_ring ct_tx;
  41     uint8_t ct_tx_buf[CONSOLE_TX_BUF_SZ]; /* must be after console_ring */
  42     struct console_ring ct_rx;
  43     uint8_t ct_rx_buf[CONSOLE_RX_BUF_SZ]; /* must be after console_ring */
  44     console_rx_cb ct_rx_cb;     /* callback that input is ready */
  45     console_write_char ct_write_char;
  46 } console_tty
</code></pre>

<h2 id="list-of-functions">List of Functions<a class="headerlink" href="#list-of-functions" title="Permanent link">&para;</a></h2>
<p>The functions available in console are:</p>
<ul>
<li><a href="#function-console_printf">console_printf</a></li>
<li><a href="#function-console_add_char">console_add_char</a></li>
<li><a href="#function-console_pull_char">console_pull_char</a></li>
<li><a href="#function-console_pull_char_head">console_pull_char_head</a></li>
<li><a href="#function-console_queue_char">console_queue_char</a></li>
<li><a href="#function-console_blocking_tx">console_blocking_tx</a></li>
<li><a href="#function-console_blocking_mode">console_blocking_mode</a></li>
<li><a href="#function-console_write">console_write</a></li>
<li><a href="#function-console_read">console_read</a></li>
<li><a href="#function-console_tx_char">console_tx_char</a></li>
<li><a href="#function-console_rx_char">console_rx_char</a></li>
<li><a href="#function-console_init">console_init</a></li>
</ul>
<h2 id="function-reference">Function Reference<a class="headerlink" href="#function-reference" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="function-console_printf"><font color="2980b9">function console_printf</font><a class="headerlink" href="#function-console_printf" title="Permanent link">&para;</a></h3>
<pre><code>    void 
    console_printf(const char *fmt, ...)
</code></pre>

<p>Writes a formatted message instead of raw output to the console. It first composes a C string containing text specified as arguments to the function or containing the elements in the variable argument list passed to it using snprintf or vsnprintf, respectively. It then uses function <code>console_write</code> to output the formatted data (messages) on the console.</p>
<h4 id="arguments">Arguments<a class="headerlink" href="#arguments" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fmt</td>
<td>Pointer to C string that contains a format string that follows the same specifications as format in printf. The string is printed to console.</td>
</tr>
<tr>
<td>...</td>
<td>Depending on the format string, the function may expect either a sequence of additional arguments to be used to replace a format specifier in the format string or a variable arguments list. va_list is a special type defined in <cstdarg> in stdarg.h.</td>
</tr>
</tbody>
</table>
<h4 id="returned-values">Returned values<a class="headerlink" href="#returned-values" title="Permanent link">&para;</a></h4>
<p>None</p>
<h4 id="notes">Notes<a class="headerlink" href="#notes" title="Permanent link">&para;</a></h4>
<p>While <code>console_printf</code>, with its well understood formatting options in C, is more convenient and easy on the eyes than the raw output of <code>console_write</code>, the associated code size is considerably larger.</p>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<p>Example #1:</p>
<pre><code>char adv_data_buf[32];

void
task()
{ 
   char adv_data_buf[32];

   console_printf(&quot;%s&quot;, adv_data_buf);
}
</code></pre>

<p>Example #2:</p>
<pre><code>struct exception_frame {
    uint32_t r0;
    uint32_t r1;

struct trap_frame {
    struct exception_frame *ef;
    uint32_t r2;
    uint32_t r3;
};

void
task(struct trap_frame *tf)
{
     console_printf(&quot; r0:%8.8x  r1:%8.8x&quot;, tf-&gt;ef-&gt;r0, tf-&gt;ef-&gt;r1);
     console_printf(&quot; r8:%8.8x  r9:%8.8x&quot;, tf-&gt;r2, tf-&gt;r3);
}
</code></pre>

<hr />
<h3 id="function-console_add_char"><font color="#2980b9"> function console_add_char</font><a class="headerlink" href="#function-console_add_char" title="Permanent link">&para;</a></h3>
<pre><code>   static void
   console_add_char(struct console_ring *cr, char ch)
</code></pre>

<p>Adds a character to the console ring buffer. When you store an item in the buffer you store it at the head location, and the head advances to the next location.</p>
<h4 id="arguments_1">Arguments<a class="headerlink" href="#arguments_1" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>*cr</td>
<td>Pointer to a console ring data structure whose <code>cr_head</code>variable is to be set to the second argument in this function call</td>
</tr>
<tr>
<td>ch</td>
<td>Character to be inserted to the ring</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_1">Returned values<a class="headerlink" href="#returned-values_1" title="Permanent link">&para;</a></h4>
<p>None</p>
<h4 id="notes_1">Notes<a class="headerlink" href="#notes_1" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h4>
<p>Add a new line character to the output (transmit) buffer.</p>
<pre><code>void
task()
{
     struct console_ring *tx = &amp;ct-&gt;ct_tx;

     console_add_char(tx, '\n');
}
</code></pre>

<hr />
<h3 id="function-console_pull_char"><font color="#2980b9"> function console_pull_char </font><a class="headerlink" href="#function-console_pull_char" title="Permanent link">&para;</a></h3>
<pre><code>   static uint8_t
   console_pull_char(struct console_ring *cr)
</code></pre>

<p>Reads (remove) a byte from the console ring buffer. When you read (pull) an item, you read it at the current tail location, and the tail advances to the next position. </p>
<h4 id="arguments_2">Arguments<a class="headerlink" href="#arguments_2" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>*cr</td>
<td>Pointer to the console ring buffer from where a character is to be removed</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_2">Returned values<a class="headerlink" href="#returned-values_2" title="Permanent link">&para;</a></h4>
<p>Returns the character pulled from the ring buffer.</p>
<h4 id="notes_2">Notes<a class="headerlink" href="#notes_2" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h4>
<p>Read the characters in the ring buffer into a string.</p>
<pre><code>void
task(struct console_ring *cr, char *str, int cnt)
{    
     for (i = 0; i &lt; cnt; i++) {
          if (cr-&gt;cr_head == cr-&gt;cr_tail) {
              i = -1;
              break;
          }
     ch = console_pull_char(cr);
     *str++ = ch;
     }
}
</code></pre>

<hr />
<h3 id="function-console_pull_char_head"><font color="#2980b9"> function console_pull_char_head </font><a class="headerlink" href="#function-console_pull_char_head" title="Permanent link">&para;</a></h3>
<pre><code>   static void
   console_pull_char_head(struct console_ring *cr)
</code></pre>

<p>Removes the last character inserted into the ring buffer by moving back the head location and shrinking the ring size by 1. </p>
<h4 id="arguments_3">Arguments<a class="headerlink" href="#arguments_3" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cr</td>
<td>Pointer to the console ring buffer from which the last inserted character must be deleted</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_3">Returned values<a class="headerlink" href="#returned-values_3" title="Permanent link">&para;</a></h4>
<p>None</p>
<h4 id="notes_3">Notes<a class="headerlink" href="#notes_3" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_3">Example<a class="headerlink" href="#example_3" title="Permanent link">&para;</a></h4>
<p>In order to see a character getting deleted when a user hits backspace while typying a command, the following needs to happen in sequence:</p>
<ul>
<li>output a backspace (move cursor back one character)</li>
<li>output space (erasing whatever character there was before)</li>
<li>output backspace (move cursor back one character)</li>
<li>remove the previous character from incoming RX queue</li>
</ul>
<p>The example below shows console_pull_char_head being used for the last step.</p>
<pre><code>void
task(uint8_t data)
{
      struct console_tty *ct = (struct console_tty *)arg;
      struct console_ring *tx = &amp;ct-&gt;ct_tx;
      struct console_ring *rx = &amp;ct-&gt;ct_rx;

      switch (data) {
      case '\b':
          console_add_char(tx, '\b');
          console_add_char(tx, ' ');
          console_add_char(tx, '\b');
          console_pull_char_head(rx);
          break;
      }
}

</code></pre>

<hr />
<h3 id="function-console_queue_char"><font color="#2980b9"> function console_queue_char </font><a class="headerlink" href="#function-console_queue_char" title="Permanent link">&para;</a></h3>
<pre><code>   static void
   console_queue_char(char ch)
</code></pre>

<p>Manage the buffer queue before inserting a character into it. If the head of the output (transmit) console ring is right up to its tail, the queue needs to be drained first before any data can be added. Then it uses console_add_char function to add the character.</p>
<h4 id="arguments_4">Arguments<a class="headerlink" href="#arguments_4" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ch</td>
<td>Character to be inserted to the queue</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_4">Returned values<a class="headerlink" href="#returned-values_4" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_4">Notes<a class="headerlink" href="#notes_4" title="Permanent link">&para;</a></h4>
<p>This function makes sure no interrupts are allowed while the transmit buffer is draining and the character is being added.</p>
<h4 id="example_4">Example<a class="headerlink" href="#example_4" title="Permanent link">&para;</a></h4>
<pre><code>Insert example
</code></pre>

<hr />
<h3 id="function-console_blocking_tx"><font color="#2980b9"> function console_blocking_tx </font><a class="headerlink" href="#function-console_blocking_tx" title="Permanent link">&para;</a></h3>
<pre><code>    static void
    console_blocking_tx(char ch)
</code></pre>

<p>Calls the hal function hal_uart_blocking_tx to transmit a byte to the console over UART in a blocking mode until the entire character has been sent. Hence it must be called with interrupts disabled. It is used when printing diagnostic output from system crash. </p>
<h4 id="arguments_5">Arguments<a class="headerlink" href="#arguments_5" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ch</td>
<td>8 bit character (data) to be transmitted</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_5">Returned values<a class="headerlink" href="#returned-values_5" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_5">Notes<a class="headerlink" href="#notes_5" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_5">Example<a class="headerlink" href="#example_5" title="Permanent link">&para;</a></h4>
<p>Here is an example of a console output queue being flushed.</p>
<pre><code>void
task(void)
{
    struct console_tty *ct = &amp;console_tty;
    uint8_t byte;

    while (ct-&gt;ct_tx.cr_head != ct-&gt;ct_tx.cr_tail) {
        byte = console_pull_char(&amp;ct-&gt;ct_tx);
        console_blocking_tx(byte);
    }
}
</code></pre>

<hr />
<h3 id="function-console_blocking_mode"><font color="#2980b9"> function console_blocking_mode </font><a class="headerlink" href="#function-console_blocking_mode" title="Permanent link">&para;</a></h3>
<pre><code>   void
   console_blocking_mode(void)
</code></pre>

<p>Calls the console_blocking_tx function to flush the buffered console output (transmit) queue. The function OS_ENTER_CRITICAL() is called to disable interrupts and OS_EXIT_CRITICAL() is called to enable interrupts back again once the buffer is flushed.</p>
<h4 id="arguments_6">Arguments<a class="headerlink" href="#arguments_6" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td>none</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_6">Returned values<a class="headerlink" href="#returned-values_6" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_6">Notes<a class="headerlink" href="#notes_6" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_6">Example<a class="headerlink" href="#example_6" title="Permanent link">&para;</a></h4>
<p>Here is an example of calling <code>console_blocking_mode</code> and printing crash information from an assert to help debug.</p>
<pre><code>void
_assert_func(const char *file, int line, const char *func, const char *e)
{
    int sr;

    OS_ENTER_CRITICAL(sr);
    (void)sr;
    os_die_line = line;
    os_die_module = file;
    console_blocking_mode();
    console_printf(&quot;Assert %s; failed in %s:%d\n&quot;, e ? e : &quot;&quot;, file, line);
    system_reset();
}
</code></pre>

<hr />
<h3 id="function-console_write"><font color="#2980b9">function console_write </font><a class="headerlink" href="#function-console_write" title="Permanent link">&para;</a></h3>
<pre><code>   void
   console_write(char *str, int cnt)
</code></pre>

<p>Transmit characters to console display over serial port. </p>
<h4 id="arguments_7">Arguments<a class="headerlink" href="#arguments_7" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>*str</td>
<td>pointer to the character or packet to be transmitted</td>
</tr>
<tr>
<td>cnt</td>
<td>size of the character or packet</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_7">Returned values<a class="headerlink" href="#returned-values_7" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_7">Notes<a class="headerlink" href="#notes_7" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_7">Example<a class="headerlink" href="#example_7" title="Permanent link">&para;</a></h4>
<p>Here is an example of the function being used in an echo command with a newline at the end.</p>
<pre><code>static int
shell_echo_cmd(int argc, char **argv)
{
    int i;

    for (i = 1; i &lt; argc; i++) {
        console_write(argv[i], strlen(argv[i]));
        console_write(&quot; &quot;, sizeof(&quot; &quot;)-1);
    }
    console_write(&quot;\n&quot;, sizeof(&quot;\n&quot;)-1);

    return (0);
}
</code></pre>

<hr />
<h3 id="function-console_read"><font color="#2980b9"> function console_read </font><a class="headerlink" href="#function-console_read" title="Permanent link">&para;</a></h3>
<pre><code>  int
  console_read(char *str, int cnt)
</code></pre>

<p>Calls hal function hal_uart_start_rx to start receiving input from console terminal over serial port.</p>
<h4 id="arguments_8">Arguments<a class="headerlink" href="#arguments_8" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>xx</td>
<td>explain argument xx</td>
</tr>
<tr>
<td>yy</td>
<td>explain argument yy</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_8">Returned values<a class="headerlink" href="#returned-values_8" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_8">Notes<a class="headerlink" href="#notes_8" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_8">Example<a class="headerlink" href="#example_8" title="Permanent link">&para;</a></h4>
<p>Give at least one example of usage.</p>
<hr />
<h3 id="function-console_tx_char"><font color="#2980b9"> function console_tx_char </font><a class="headerlink" href="#function-console_tx_char" title="Permanent link">&para;</a></h3>
<pre><code>   static int
   console_tx_char(void *arg)
</code></pre>

<h4 id="arguments_9">Arguments<a class="headerlink" href="#arguments_9" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>xx</td>
<td>explain argument xx</td>
</tr>
<tr>
<td>yy</td>
<td>explain argument yy</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_9">Returned values<a class="headerlink" href="#returned-values_9" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_9">Notes<a class="headerlink" href="#notes_9" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_9">Example<a class="headerlink" href="#example_9" title="Permanent link">&para;</a></h4>
<p>Give at least one example of usage.</p>
<hr />
<h3 id="function-console_rx_char"><font color="#2980b9"> function console_rx_char </font><a class="headerlink" href="#function-console_rx_char" title="Permanent link">&para;</a></h3>
<pre><code>   static int
   console_rx_char(void *arg, uint8_t data)
</code></pre>

<h4 id="arguments_10">Arguments<a class="headerlink" href="#arguments_10" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>xx</td>
<td>explain argument xx</td>
</tr>
<tr>
<td>yy</td>
<td>explain argument yy</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_10">Returned values<a class="headerlink" href="#returned-values_10" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_10">Notes<a class="headerlink" href="#notes_10" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_10">Example<a class="headerlink" href="#example_10" title="Permanent link">&para;</a></h4>
<p>Give at least one example of usage.</p>
<hr />
<h3 id="function-console_init"><font color="#2980b9"> function console_init </font><a class="headerlink" href="#function-console_init" title="Permanent link">&para;</a></h3>
<pre><code>   int
   console_init(console_rx_cb rx_cb)
</code></pre>

<p>Initializes console receive buffer and calls hal funtions hal_uart_init_cbs and hal_uart_config to initialize serial port connection and configure it (e.g. baud rate, flow control etc.)</p>
<h4 id="arguments_11">Arguments<a class="headerlink" href="#arguments_11" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>xx</td>
<td>explain argument xx</td>
</tr>
<tr>
<td>yy</td>
<td>explain argument yy</td>
</tr>
</tbody>
</table>
<h4 id="returned-values_11">Returned values<a class="headerlink" href="#returned-values_11" title="Permanent link">&para;</a></h4>
<p>List any values returned.
Error codes?</p>
<h4 id="notes_11">Notes<a class="headerlink" href="#notes_11" title="Permanent link">&para;</a></h4>
<p>Any special feature/special benefit that we want to tout. 
Does it need to be used with some other specific functions?
Any caveats to be careful about (e.g. high memory requirements).</p>
<h4 id="example_11">Example<a class="headerlink" href="#example_11" title="Permanent link">&para;</a></h4>
<p>Give at least one example of usage.</p>
<hr />
                        
                    </div>
                </div>
            
            <div class="row">    
                <footer>
    <div class="row">
        <div class="col-md-12">
            
                <p class="copyright">Copyright &copy; 2015 The Apache Software Foundation, Licensed under the Apache License, Version 2.0 Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<br>The Apache Software Foundation Apache Incubator</p>
            
        </div>
    </div>
    <div class="copyright-logos">
        <div class="row">
            <div class="col-xs-6 text-right">
                <img src="http://mynewt.incubator.apache.org/img/apache-feather.png" alt="Apache" title="Apache">
            </div>
            <div class="col-xs-6 text-left">
                <img src="http://mynewt.incubator.apache.org/img/apache-logo.png" alt="Apache Incubator" title="Apache Incubator">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <small class="footnote">
                MyNewt is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
            </small>
        </div>
    </div>
</footer>
            </div>
        </div>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../js/custom.js"></script>

    </body>
</html>