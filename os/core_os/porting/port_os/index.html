<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://mynewt.apache.org/os/core_os/porting/port_os/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">

	<title>Overview - Apache Mynewt</title>

        <link href="../../../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../../css/highlight.css">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link href="../../../../css/custom.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,700,900,300,100' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link href="../../../../extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-72162311-1', 'mynewt.incubator.apache.org');
                ga('send', 'pageview');
            </script>
        
    </head>


    <body class="Overview">


        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="logo-container">
        <img src="/img/logo.svg">
    </div>
    <div class="container-fluid">
        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/documentation/">Docs</a>
                </li>
                <li>
                    <a href="/download/">Download</a>
                </li>
                <li>
                    <a href="/community/">Community</a>
                </li>
                <li>
                    <a href="/events/">Events</a>
                </li>
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
            </ul>
        </div>
    </div>
</div>

        <div class="container-fluid">
            
                <div class="row sm-extra-padding">
                    <div class="col-md-3 bg-grey sidebar-container"><div class="bs-sidebar hidden-print" role="complementary">
    <div class="sidebar-top">
        <img class="hidden-xs hidden-sm logo-small" src="/img/logo.svg" alt="MyNewt" title="MyNewt">
        <div class="small" role="search">
            <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
                <div class="form-group">
                    <input type="text" name="q" placeholder="Search documentation" />
                    <button class="search-button" type="submit"><i class="fa fa-search"></i></button>
                </div>
            </form>
        </div>
    </div>
    <ul class="nav bs-sidenav">
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
  
  <li><a href="
  ../../../get_started/introduction/
">Apache Mynewt Manual</a>
    
      <ul class="current-toc">
          
              
  
    <li>
      <a href="../../../get_started/introduction/">Introduction</a>
    </li>
  

          
              
  
  <li><a href="
  ../../../get_started/project1/
">Get Started</a>
    
  </li>

          
              
  
  <li><a href="
  ../../../tutorials/STM32F303/
">Tutorials</a>
    
  </li>

          
              
  
  <li><a href="
  
  
  
  
  ../../mynewt_os/


">OS User Guide</a>
    
      <ul class="current-toc">
          
              
  
  <li><a href="
  
  
  ../../mynewt_os/

">OS Core</a>
    
  </li>

          
              
  
  <li><a href="
  ./
">Porting to your Platform</a>
    
      <ul class="current-toc">
          
              
  
    <li class="active">
      Overview
    </li>
  

          
              
  
    <li>
      <a href="../port_bsp/">BSP Porting</a>
    </li>
  

          
              
  
    <li>
      <a href="../port_mcu/">MCU Porting</a>
    </li>
  

          
              
  
    <li>
      <a href="../port_cpu/">CPU Porting</a>
    </li>
  

          
      </ul>
    
  </li>

          
              
  
  <li><a href="
  ../../../modules/console/console/
">Console</a>
    
  </li>

          
              
  
  <li><a href="
  ../../../modules/shell/shell/
">Shell</a>
    
  </li>

          
              
  
  <li><a href="
  ../../../modules/bootloader/bootloader/
">Bootloader</a>
    
  </li>

          
              
  
  <li><a href="
  
  
  ../../../modules/fs/fs/fs/

">File System</a>
    
  </li>

          
              
  
  <li><a href="
  ../../../modules/hal/hal/
">Hardware Abstraction Layer</a>
    
  </li>

          
              
  
  <li><a href="
  ../../../modules/testutil/testutil/
">Test Utilities</a>
    
  </li>

          
              
  
  <li><a href="
  ../../../modules/imgmgr/imgmgr/
">Image Manager</a>
    
  </li>

          
              
  
    <li>
      <a href="../../../modules/baselibc/">Baselibc library</a>
    </li>
  

          
              
  
  <li><a href="
  ../../../modules/elua/elua/
">Embedded Lua</a>
    
  </li>

          
              
  
  <li><a href="
  ../../../modules/json/json/
">JSON</a>
    
  </li>

          
      </ul>
    
  </li>

          
              
  
  <li><a href="
  
  
  ../../../../network/ble/ble_intro/

">Networking User Guide</a>
    
  </li>

          
      </ul>
    
  </li>

        
      
        
          
  
  <li><a href="
  ../../../../newt/newt_intro/
">Newt Tool Manual</a>
    
  </li>

        
      
        
          
  
  <li><a href="
  ../../../../newtmgr/overview/
">Newt Manager Manual</a>
    
  </li>

        
      
    </ul>
</div></div>
                    
                    <div class="show-sidebar-container">
                        <button class="show-sidebar">Docs Menu</button>
                    </div>
                    
                    <div class="col-md-9 documentation-viewer" role="main">
                        <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
        
          <li>OS User Guide &raquo;</li>
        
      
        
          <li>Porting to your Platform &raquo;</li>
        
      
    
    <li>Overview</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
                        
                            <h1 id="porting-mynewt-os">Porting Mynewt OS<a class="headerlink" href="#porting-mynewt-os" title="Permanent link">&para;</a></h1>
<p>This chapter describes how to adapt the Mynewt OS to different platforms. </p>
<h2 id="description">Description<a class="headerlink" href="#description" title="Permanent link">&para;</a></h2>
<p>The Mynewt OS is a complete multi-tasking environment with scheduler, time 
control, buffer management, and synchronization objects. it also includes 
libraries and services like console, command shell, image manager, 
bootloader, and file systems etc.</p>
<p>Thee majority of this software is platform independent and requires no
intervention to run on your platform, but some of the components require 
support from the underlying platform. </p>
<p>The platform dependency of these components can fall into several categories:</p>
<ul>
<li><strong>CPU Core Dependencies</strong> -- Specific code or 
configuration to operate the CPU core within your target platform</li>
<li><strong>MCU Dependencies</strong> -- Specific code or configuration to operate the MCU or 
SoC within your target platform</li>
<li><strong>BSP Dependencies</strong> -- Specific code or configuration to accommodate the 
specific layout and functionality of your target platform </li>
</ul>
<h2 id="bsp-dependency">BSP Dependency<a class="headerlink" href="#bsp-dependency" title="Permanent link">&para;</a></h2>
<p>With all of the functionality provided by the core, MCU, and MCU HAL (Hardware Abstraction Layer), there are still some things that must be specified for your particular system. This 
is provided in Mynewt to allow you the flexibility to design for the exact
functionality, peripherals and features that you require in your product.  </p>
<p>In Mynewt, these settings/components are included in a Board Support Package 
(BSP).  The BSP contains the information specific to running Mynewt on a target 
platform or hardware board.  Mynewt supports some common open source hardware as well
as the development boards for some common MCUs.  These development systems
might be enough for you to get your prototype up and running, but when building
a product you are likely going to have your own board which is slightly different
from those already supported by Mynewt.</p>
<p>For example, you might decide on your system that 16 Kilobytes of flash space
in one flash device is reserved for a flash file system.  Or on your system 
you may decide that GPIO pin 5 of the MCU is connected to the system LED. Or
you may decide that the OS Tick (the underlying time source for the OS) should
run slower than the defaults to conserve battery power.  These types of 
behaviors are specified in the BSP.  </p>
<p>The information provided in the BSP (what you need to specify to get a 
complete executable) can vary depending on the MCU and its underlying core
architecture.  For example, some MCUs have dedicated pins for UART, SPI etc,
so there is no configuration required in the BSP when using these peripherals.
However some MCUs have a pin multiplexor that allows the UART to be mapped to
several different pins.  For these MCUs, the BSP must specify if and where
the UART pins should appear to match the hardware layout of your system.</p>
<ul>
<li>If your BSP is already supported my Mynewt, there is no additional BSP work involved in porting to your platform.  You need only to set the <code>bsp</code> attribute in your Mynewt target using the <a href="../../../../../newt/newt_intro">newt command tool</a>. </li>
<li>If your BSP is not yet supported by Mynewt, you can add support following the instructions on <a href="../port_bsp/">how to add BSP support to Mynewt</a></li>
</ul>
<h2 id="mcu-dependency">MCU Dependency<a class="headerlink" href="#mcu-dependency" title="Permanent link">&para;</a></h2>
<p>Some OS code depends on the MCU or SoC that the system contains. For example, the MCU may specify the potential memory map of the system - where code and data can reside.</p>
<ul>
<li>If your MCU is already supported my Mynewt, there is no additional MCU work involved in porting to your platform.  You need only to set the <code>arch</code> attribute in your Mynewt target using the <a href="../../../../../newt/newt_intro">newt command tool</a>. </li>
<li>If your MCU is not yet supported by Mynewt, you can add support following the instructions on<a href="../port_mcu/">how to add MCU support to Mynewt</a></li>
</ul>
<h3 id="mcu-hal">MCU HAL<a class="headerlink" href="#mcu-hal" title="Permanent link">&para;</a></h3>
<p>Mynewt's architecture supports a hardware abstraction layer (HAL) for common on or off-chip MCU peripherals such as GPIO, UARTs, flash memory etc.  Even if your MCU is supported for the core OS, you may find that you need to implement the HAL functionality for a new peripheral.   For a description of the HAL abstraction and implementation information,
see the <a href="../../../modules/hal/hal/">HAL API</a></p>
<h2 id="cpu-core-dependency">CPU Core Dependency<a class="headerlink" href="#cpu-core-dependency" title="Permanent link">&para;</a></h2>
<p>Some OS code depends on the CPU core that your system is using.  For example, a given CPU core has a specific assembly language instruction set, and may require special cross compiler or compiler settings to use the appropriate instruction set.  </p>
<ul>
<li>If your CPU architecture is already supported my Mynewt, there is no CPU core work involved in porting to your platform.  You need only to set the  <code>arch</code> and <code>compiler</code> attributes in your Mynewt target using the <a href="../../../../../newt/newt_intro">newt command tool</a>. </li>
<li>If your CPU architecture is not supported by Mynewt, you can add support following the instructions on <a href="../port_cpu/">how to add CPU architecture support to Mynewt</a></li>
</ul>
                        
                    </div>
                </div>
            
            <div class="row">    
                <footer>
    <div class="row">
        <div class="col-md-12">
            
                <p class="copyright">Copyright &copy; 2015 The Apache Software Foundation, Licensed under the Apache License, Version 2.0 Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<br>The Apache Software Foundation Apache Incubator</p>
            
        </div>
    </div>
    <div class="copyright-logos">
        <div class="row">
            <div class="col-xs-6 text-right">
                <img src="/img/apache-feather.png" alt="Apache" title="Apache">
            </div>
            <div class="col-xs-6 text-left">
                <img src="/img/apache-logo.png" alt="Apache Incubator" title="Apache Incubator">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <small class="footnote">
                MyNewt is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
            </small>
        </div>
    </div>
</footer>
            </div>
        </div>

        <script src="../../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../../js/highlight.pack.js"></script>
        <script src="../../../../js/base.js"></script>
        <script src="../../../../js/custom.js"></script>

    </body>
</html>