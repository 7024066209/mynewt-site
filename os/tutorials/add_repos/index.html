<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://mynewt.apache.org/os/tutorials/add_repos/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Additional Repositories - Apache Mynewt</title>

        <link href="../../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
        <link href="../../../css/custom.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,700,900,300,100' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link href="../../../extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-72162311-1', 'mynewt.incubator.apache.org');
                ga('send', 'pageview');
            </script>
        
    </head>


    <body class="Additional Repositories">


        <div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="logo-container">
        <img src="/img/logo.svg">
    </div>
    <div class="container-fluid">
        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li class="dropdown">
                    <a href="/documentation/" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        
                        
                        
                        
                        <li >
                            <a href="../../../documentation/">
                                Overview
                            </a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li class="active">
                            <a href="../../get_started/introduction/">
                                Mynewt OS Manual
                            </a>
                        </li>
                        
                        
                        
                        <li >
                            <a href="../../../newt/newt_intro/">
                                Newt Tool Manual
                            </a>
                        </li>
                        
                        
                        
                        <li >
                            <a href="../../../newtmgr/overview/">
                                Newt Manager Manual
                            </a>
                        </li>
                        
                        
                        
                        <li >
                            <a href="../how_to_edit_docs/">
                                Appendix
                            </a>
                        </li>
                        
                        
                    </ul>
                </li>
                <li>
                    <a href="/download/">Download</a>
                </li>
                <li>
                    <a href="/community/">Community</a>
                </li>
                <li>
                    <a href="/events/">Events</a>
                </li>
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
            </ul>
        </div>
    </div>
</div>

        

        <div class="container-fluid">
            
                <div class="row sm-extra-padding">
                    <div id="docSidebar" class="col-md-3 bg-grey sidebar-container"><div class="bs-sidebar hidden-print" role="complementary">
    <div class="sidebar-top">
        <img class="hidden-xs hidden-sm logo-small" src="/img/logo.svg" alt="MyNewt" title="MyNewt">
        <div class="small" role="search">
            <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
                <div class="form-group">
                    <input type="text" name="q" placeholder="Search documentation" />
                    <button class="search-button" type="submit"><i class="fa fa-search"></i></button>
                </div>
            </form>
        </div>
    </div>
    <ul class="nav bs-sidenav">
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
  
  
    <li><a href="
  ../../get_started/introduction/
">Mynewt OS Manual</a>
  
    
      <ul class="current-toc">
          
              
                
  
    <li>
      <a href="../../get_started/introduction/">Introduction</a>
    </li>
  

              
          
              
                
  
  
    <li ><a href="../../get_started/get_started/">Quick Start</a></li>
  
    
  </li>

              
          
              
                
  
  
    <li ><a href="../../get_started/vocabulary/">Concepts</a></li>
  
    
  </li>

              
          
              
                
  
  
    <li ><a href="../tutorials/">Tutorials</a></li>
  
    
      <ul class="current-toc">
          
              
          
              
                
  
    <li>
      <a href="../arduino_zero/">Blinky on Arduino Zero</a>
    </li>
  

              
          
              
                
  
    <li>
      <a href="../olimex/">Blinky on Olimex</a>
    </li>
  

              
          
              
                
  
    <li>
      <a href="../STM32F303/">Blinky on STM32F303</a>
    </li>
  

              
          
              
                
  
    <li>
      <a href="../nRF52/">Blinky on nRF52</a>
    </li>
  

              
          
              
                
  
    <li>
      <a href="../unit_test/">Write a Test Suite for a Package</a>
    </li>
  

              
          
              
                
  
    <li>
      <a href="../air_quality_sensor/">Air-quality Sensor project</a>
    </li>
  

              
          
              
                
  
    <li class="active">
      Additional Repositories
    </li>
  

              
          
              
                
  
    <li>
      <a href="../event_queue/">A task to manages multiple events</a>
    </li>
  

              
          
      </ul>
    
  </li>

              
          
              
                
  
  
    <li ><a href="../../os_user_guide/">OS User Guide</a></li>
  
    
  </li>

              
          
              
                
  
  
    <li><a href="
  
  
  ../../../network/ble/ble_intro/

">Networking User Guide</a>
  
    
  </li>

              
          
      </ul>
    
  </li>

        
      
        
          
  
  
    <li><a href="
  ../../../newt/newt_intro/
">Newt Tool Manual</a>
  
    
  </li>

        
      
        
          
  
  
    <li><a href="
  ../../../newtmgr/overview/
">Newt Manager Manual</a>
  
    
  </li>

        
      
        
          
  
  
    <li><a href="
  ../how_to_edit_docs/
">Appendix</a>
  
    
  </li>

        
      
    </ul>
</div></div>

                    <div class="show-sidebar-container">
                        <button class="show-sidebar">Docs Menu</button>
                    </div>

                    <div class="col-md-offset-3 col-md-9 documentation-viewer" role="main">
                        <div class="row doc-header">
                            <div class="col-sm-6">
                                
<ul class="nav nav-pills">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <li class="active" role="presentation"><a href="../../get_started/introduction/">Mynewt OS</a></li>
    
    
    
    <li  role="presentation"><a href="../../../newt/newt_intro/">Newt Tool</a></li>
    
    
    
    <li  role="presentation"><a href="../../../newtmgr/overview/">Newt Mgr</a></li>
    
    
    
    
</ul>
                            </div>
                            <div class="col-sm-6">
                                <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="/documentation/">Docs</a></li>
    
    
        
          <li>&raquo; <a href="../../get_started/introduction/">Mynewt OS Manual</a></li>
        
      
        
          <li>&raquo; <a href="../tutorials/">Tutorials</a></li>
        
      
      
        <li>&raquo; Additional Repositories</li>
      
    
    
  </ul>
</div>
                            </div>
                        </div>
                        
                            <h2 id="additional-repositories">Additional Repositories<a class="headerlink" href="#additional-repositories" title="Permanent link">&para;</a></h2>
<h3 id="what-is-a-repository">What is a Repository<a class="headerlink" href="#what-is-a-repository" title="Permanent link">&para;</a></h3>
<p>A repository is a version-ed Mynewt project, which is a 
collection of Mynewt packages organized in a specific
way.  </p>
<p>What differentiates a repository from a Mynewt project is the presence of a
<code>repository.yml</code> file describing the repository. This will be described 
below. <strong>Note:</strong> For the remainder of this document we'll use the term repo as shorthand for a 
Mynewt repository.</p>
<p>Repos are useful because they are an organized way for the community
to share Mynewt packages and projects.  In fact, the Mynewt-core is 
distributed as a repo.</p>
<p><br></p>
<h3 id="why-does-mynewt-need-additional-repos">Why does Mynewt need additional repos?<a class="headerlink" href="#why-does-mynewt-need-additional-repos" title="Permanent link">&para;</a></h3>
<p>Repos add functionality not included in the Mynewt core.  New repos might be created for 
several reasons.</p>
<ul>
<li><strong>Expertise</strong>.  Individuals or organizations may have expertise that they want
to share in the form of repos. For example a chip vendor may
create a repo to hold the Mynewt support for their chips.</li>
<li><strong>Non-Core component</strong>.  Some components, although very useful to Mynewt users
are not core to all Mynewt users.  These are likely candidates to be held in 
different repos.</li>
<li><strong>Software licensing</strong>.  Some software have licenses that make them incompatible
with the ASF (Apache Software Foundation) license policies.  These may be 
valuable components to some Mynewt users, but cannot be contained in the <code>apache-Mynewt-core</code>.</li>
</ul>
<p><br></p>
<h3 id="what-repos-are-in-my-project">What Repos are in my Project<a class="headerlink" href="#what-repos-are-in-my-project" title="Permanent link">&para;</a></h3>
<p>The list of repos used by your project are contained within the 
<code>project.yml</code> file.  An example can be seen by creating a new project:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">$ mkdir ~/dev
$ cd ~/dev
$ newt new myproj
$ cd myproj
</pre></div>


<p><br></p>
<p>View the <code>project.yml</code> section and you will see a line describing the repos:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">project.repositories:
    - apache-Mynewt-core
</pre></div>


<p><br> </p>
<p>By default, this newly created project uses a single repo called 
<code>apache-Mynewt-core</code>.  </p>
<p>If you wish to add additional repos, you would add 
additional lines to the <code>project.repositories</code> variable like this.</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">project.repositories:
    - apache-Mynewt-core
    - another_repo_named_x
</pre></div>


<p><br></p>
<h3 id="repo-descriptors">Repo Descriptors<a class="headerlink" href="#repo-descriptors" title="Permanent link">&para;</a></h3>
<p>In addition to the repo name, the <code>project.yml</code> file must also contain
a repo descriptor for each repository you include that gives <code>newt</code> 
information on obtaining the repo.</p>
<p>In the same <code>myproj</code> above you will see the following repo descriptor.</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">repository.apache-Mynewt-core:
    type: github
    vers: 0-latest
    user: apache
    repo: incubator-mynewt-core
</pre></div>


<p>A repo descriptor starts with <code>repository.&lt;name&gt;.</code>.  In this example, the 
descriptor specifies the information for the <code>apache-Mynewt-core</code>.</p>
<p><br></p>
<p>The fields within the descriptor have the following definitions:</p>
<ul>
<li>
<p><strong>type</strong> -- The type of code storage the repo uses.  The current version
of <code>newt</code> only supports github.  Future versions may support generic git or other
code storage mechanisms.</p>
</li>
<li>
<p><strong>vers</strong> -- The version of the repo to use for your project.  A source
code repository contains many versions of the source. This field is used to 
specify the one to use for this project.  See the section on versions below 
for a detailed description of the format of this field.</p>
</li>
<li>
<p><strong>user</strong> -- The username for the repo.  On github, this is the name
after <code>github.com</code> in the repo path.  Consider the repository 
<code>https://github.com/apache/incubator-mynewt-core</code>. It has username <code>apache</code>.  </p>
</li>
<li>
<p><strong>repo</strong> -- The name of the repo.  On github, this is the name after
the username described above.  Consider the repository 
<code>https://github.com/apache/incubator-mynewt-core</code>. It has username 
<code>incubator-mynewt-core</code>.  This is a path to the source control
and should not be confused with the name of the repo that you used in the 
<code>repository.&lt;name&gt;</code> declaration above.   That name is contained elsewhere
within the repo. See Below.</p>
</li>
</ul>
<p><br></p>
<h3 id="adding-existing-repos-to-my-project">Adding Existing Repos to my Project<a class="headerlink" href="#adding-existing-repos-to-my-project" title="Permanent link">&para;</a></h3>
<p>To add a new repo to your project, you have to complete two steps.</p>
<ul>
<li>
<p>Edit the <code>project.yml</code> file and add a new repo descriptor.  The previous
section includes information on the field required in your repo descriptor.</p>
</li>
<li>
<p>Edit the <code>project/yml</code> file and add a new line to the <code>project.repositories</code>
variable with the name of the repo you are adding.  </p>
</li>
</ul>
<p>An example if a <code>project.yml</code> file with two repositories is shown below:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">project.name: &quot;my_project&quot;

project.repositories:
    - apache-Mynewt-core
    - Mynewt_arduino_zero

# Use github&#39;s distribution mechanism for core ASF libraries.
# This provides mirroring automatically for us.
#
repository.apache-Mynewt-core:
    type: github
    vers: 0-latest
    user: apache
    repo: incubator-mynewt-core

# a special repo to hold hardware specific stuff for arduino zero
repository.Mynewt_arduino_zero:
    type: github
    vers: 0-latest
    user: runtimeinc
    repo: Mynewt_arduino_zero
</pre></div>


<p><br></p>
<h3 id="what-version-of-the-repo-to-use">What Version of the Repo to use<a class="headerlink" href="#what-version-of-the-repo-to-use" title="Permanent link">&para;</a></h3>
<p>Mynewt repos are version-ed artifacts.  They are stored in source control 
systems like github.  The repo descriptor in your <code>project.yml</code> file must
specify the version of the repo you will accept into your project.</p>
<p>For now, we are at the beginnings of Mynewt. For testing and evaluation
please use <code>0-latest</code> in the <code>vers</code> field in your repo descriptor.</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">    vers:0-latest
</pre></div>


<p>See below for a description of the version system.</p>
<p><br></p>
<h3 id="what-is-in-a-repo">What is in a Repo<a class="headerlink" href="#what-is-in-a-repo" title="Permanent link">&para;</a></h3>
<p>A repo is a collection of Mynewt packages organized in a specific
way and stored in one of the supported code storage methods described above.  </p>
<p>A repo is a Mynewt project with an additional file <code>repository.yml</code>
which describes the repo for use by <code>newt</code> (and humans browsing them).</p>
<p>There is one key consideration for this <code>repository.yml</code> file. The 
<code>repository.yml</code> file only lives in the master branch of the git
repository.  <code>Newt</code> will always fetch this file from the master branch and then
use that to resolve the actual branch required depending on the version
specified in the project.  Special care should be taken to ensure that this
file exists only in the master branch.</p>
<p>Here is the <code>repository.yml</code> file from the apache-Mynewt-core:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">repo.name: apache-mynewt-core
repo.versions:
    &quot;0.7.9&quot;: &quot;Mynewt_0_8_0_b2_tag&quot;
    &quot;0-latest&quot;: &quot;0.7.9&quot;
    &quot;0.8-latest&quot;: &quot;0.7.9&quot;
</pre></div>


<p><br></p>
<p>It contains the following:</p>
<ul>
<li><strong>repo.name</strong> The external name that is used to include the library in 
your <code>project.yml</code> file.   This is the name you in include in the <code>project.repositories</code> variable when adding this repository to your project.</li>
<li><strong>repo.versions</strong> A description of what versions to give the user depending 
on the settings in their <code>project.yml</code> file.  See below for a thorough description
on versioning. Its a flexible mapping between version numbers and git branches.</li>
</ul>
<p><br></p>
<h3 id="repo-version">Repo Version<a class="headerlink" href="#repo-version" title="Permanent link">&para;</a></h3>
<p>The version field argument in your <code>project.yml</code> file has the following format:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">&lt;major_num&gt;.&lt;minor_num&gt;.&lt;revision_num&gt;
</pre></div>


<p>or</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">&lt;major_num&gt;.&lt;minor_num&gt;-&lt;stability string&gt;
</pre></div>


<p>or </p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">&lt;major_num&gt;-&lt;stability string&gt;
</pre></div>


<p><br></p>
<p>The stability string can be one of 3 pre-defined stability values.</p>
<ol>
<li>stable -- A stable release version of the repository</li>
<li>dev    -- A development version from the repository</li>
<li>latest -- The latest from the repository</li>
</ol>
<p>In your <code>project.yml</code> file you can specify different combinations of 
the version number and stability value.  For example:</p>
<ul>
<li><code>0-latest</code>      -- The latest version with major number 0</li>
<li><code>1.2-stable</code>    -- The latest stable version with major and minor number 1.2</li>
<li><code>1.2-dev</code>       -- The development version from 1.2</li>
<li><code>1.1.1</code>         -- a specific version 1.1.1</li>
</ul>
<p>You cannot specify a stability string with a fully numbered version, e.g.</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">1.2.8-stable
</pre></div>


<p><br></p>
<p>A <code>repository.yml</code> file contains information to match this version request
into a git branch to fetch for your project.</p>
<p>Its up to the repository maintainer to map these to branches of the 
repository.  For example, let's say in a fictitious repository the following are 
defined.</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%">repo.versions:
    &quot;0.8.0&quot;: &quot;xxx_branch_0_8_0&quot;
    &quot;1.0.0&quot;: &quot;xxx_branch_1_0_0&quot;
    &quot;1.0.2&quot;: &quot;xxx_branch_1_0_2&quot;
    &quot;1.1.1&quot;: &quot;xxx_branch_1_1_0&quot;
    &quot;1.1.2&quot;: &quot;xxx_branch_1_1_2&quot;
    &quot;1.2.0&quot;: &quot;xxx_branch_1_2_0&quot;
    &quot;1.2.1&quot;: &quot;xxx_branch_1_2_1&quot;
    &quot;1.2-dev&quot;: &quot;1.2.1&quot;
    &quot;1-dev&quot;: &quot;1.2-dev&quot;
    &quot;1.2-stable&quot;: &quot;1.2.0&quot;
    &quot;0-latest&quot;: &quot;0.8.0&quot;
    &quot;1-latest&quot;: &quot;1-dev&quot;
    ....
</pre></div>


<p>When the <code>project.yml</code> file asks for <code>1.2-stable</code> its resolved to version
<code>1.2.0</code> (perhaps <code>1.2.1</code> is not stable yet), which resolves to a specific
branch <code>xxx_branch_1_2_0</code>.  This is the branch that <code>newt</code> fetches into 
your project.</p>
<p><br></p>
<h3 id="how-to-find-out-what-repos-are-available-for-mynewt-components">How to find out what Repos are available for Mynewt components<a class="headerlink" href="#how-to-find-out-what-repos-are-available-for-mynewt-components" title="Permanent link">&para;</a></h3>
<p>Currently, there is no <code>newt</code> command to locate/search Mynewt package 
repositories.  However, since the <code>newt</code> tool supports only github, 
searching github by keyword is a satisfactory option until a search 
tool is created.</p>
<p>When searching github, recall that a Mynewt repository must 
have a <code>repository.yml</code> file in its root directory. If you don't see 
that file, it's not a Mynewt repository and can't be included in your 
project via the newt tool.  </p>
<p>Once you find a repository, the github URL and <code>repository.yml</code> file
should give you all the information to add it to your <code>project.yml</code> file.</p>
<p><br></p>
                        
                        <div class="row">
                            
<ul class="nav nav-pills" style="margin-bottom: 10px">
    <li>
    
    <a href=../air_quality_sensor/><span class="fa fa-arrow-left"></span>  Previous: Air-quality Sensor project</a>
    
    </li>
    <li class="pull-right">
    
    <a href=../event_queue/></span>Next: A task to manages multiple events  <span class="fa fa-arrow-right">
    
    </li>
</ul>
                        </div>
                        <div class="row">
                            <footer>
    <div class="row">
        <div class="col-md-12">
            
                <p class="copyright">Copyright &copy; 2015 The Apache Software Foundation, Licensed under the Apache License, Version 2.0 Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<br>The Apache Software Foundation Apache Incubator</p>
            
        </div>
    </div>
    <div class="copyright-logos">
        <div class="row">
            <div class="col-xs-6 text-right">
                <img src="/img/apache-feather.png" alt="Apache" title="Apache">
            </div>
            <div class="col-xs-6 text-left">
                <img src="/img/apache-logo.png" alt="Apache Incubator" title="Apache Incubator">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <small class="footnote">
                MyNewt is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
            </small>
        </div>
    </div>
</footer>
                        </div>
                    </div>
                </div>
            
            
        </div>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script src="../../../js/base.js"></script>
        <script src="../../../js/custom.js"></script>

    </body>
</html>