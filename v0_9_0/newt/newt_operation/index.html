<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://mynewt.apache.org/newt/newt_operation/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Newt Theory of Ops - Apache Mynewt</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-72162311-1', 'auto');
            ga('send', 'pageview');
        </script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Apache Mynewt</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li >
                                <a href="../../quick-start/">Quick Start</a>
                            </li>
                            <li >
                                <a href="../../about/">About</a>
                            </li>
                            <li >
                                <a href="../../download/">Download</a>
                            </li>
                            <li >
                                <a href="../../community/">Community</a>
                            </li>
                            <li >
                                <a href="../../events/">Events</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Mynewt Documentation <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../os/introduction/">toc</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Basic Setup</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/get_started/get_started/">toc</a>
</li>
            
<li >
    <a href="../../os/get_started/docker/">Docker Container Option</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Native install Option</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/get_started/native_tools/">toc</a>
</li>
            
<li >
    <a href="../install/newt_mac/">Install Newt on Mac</a>
</li>
            
<li >
    <a href="../install/newt_linux/">Install Newt on Linux</a>
</li>
            
<li >
    <a href="../../os/get_started/cross_tools/">Install Cross Tools for ARM</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/get_started/project_create/">Create Your First Project</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../os/get_started/vocabulary/">Concepts</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Tutorials</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/tutorials/tutorials/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Project Blinky</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/tutorials/arduino_zero/">Blinky on Arduino Zero</a>
</li>
            
<li >
    <a href="../../os/tutorials/blinky_primo/">Blinky on Arduino Primo</a>
</li>
            
<li >
    <a href="../../os/tutorials/olimex/">Blinky on Olimex</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Blinky on STM32F303</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/tutorials/STM32F303/">toc</a>
</li>
            
<li >
    <a href="../../os/tutorials/pin-wheel-mods/">Pinwheel Blinky</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/tutorials/nRF52/">Blinky on nRF52</a>
</li>
            
<li >
    <a href="../../os/tutorials/blinky_sram_olimex/">Run Blinky from SRAM, no bootloader</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Work with repositories</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/tutorials/repo/add_repos/">toc</a>
</li>
            
<li >
    <a href="../../os/tutorials/repo/upgrade_repo/">Upgrade a repo</a>
</li>
            
<li >
    <a href="../../os/tutorials/repo/create_repo/">Turn project into a repo</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/tutorials/unit_test/">Write a Test Suite for a Package</a>
</li>
            
<li >
    <a href="../../os/tutorials/air_quality_sensor/">Air-quality Sensor project</a>
</li>
            
<li >
    <a href="../../os/tutorials/event_queue/">Add task to manage multiple events</a>
</li>
            
<li >
    <a href="../../os/tutorials/project-slinky/">Enable remote comms on sim device</a>
</li>
            
<li >
    <a href="../../os/tutorials/project-target-slinky/">Enable remote comms on STM32 board</a>
</li>
            
<li >
    <a href="../../os/tutorials/bletiny_project/">BLE app to check stats via console</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">BLE peripheral project</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/tutorials/bleprph/bleprph-intro/">toc</a>
</li>
            
<li >
    <a href="../../os/tutorials/bleprph/bleprph-svc-reg/">Service Registration</a>
</li>
            
<li >
    <a href="../../os/tutorials/bleprph/bleprph-chr-access/">Characteristic Access</a>
</li>
            
<li >
    <a href="../../os/tutorials/bleprph/bleprph-adv/">Advertising</a>
</li>
            
<li >
    <a href="../../os/tutorials/bleprph/bleprph-conn/">Connection Callbacks</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/tutorials/ibeacon/">BLE iBeacon</a>
</li>
            
<li >
    <a href="../../os/tutorials/blehci_project/">BLE HCI interface</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">OS User Guide</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/os_user_guide/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">OS Core</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/mynewt_os/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">System-level Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/os_init/">os_init</a>
</li>
            
<li >
    <a href="../../os/core_os/os_start/">os_start</a>
</li>
            
<li >
    <a href="../../os/core_os/os_started/">os_started</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Scheduler</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/context_switch/context_switch/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/context_switch/os_sched/">os_sched</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_arch_ctx_sw/">os_arch_ctx_sw</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_ctx_sw_hook/">os_sched_ctx_sw_hook</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_get_current_task/">os_sched_get_current_task</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_insert/">os_sched_insert</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_next_task/">os_sched_next_task</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_os_timer_exp/">os_sched_os_timer_exp</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_resort/">os_sched_resort</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_set_current_task/">os_sched_set_current_task</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_sleep/">os_sched_sleep</a>
</li>
            
<li >
    <a href="../../os/core_os/context_switch/os_sched_wakeup/">os_sched_wakeup</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Time</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/time/os_time/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/time/os_time_delay/">os_time_delay</a>
</li>
            
<li >
    <a href="../../os/core_os/time/os_time_get/">os_time_get</a>
</li>
            
<li >
    <a href="../../os/core_os/time/os_time_tick/">os_time_tick</a>
</li>
            
<li >
    <a href="../../os/core_os/time/os_gettimeofday/">os_gettimeofday</a>
</li>
            
<li >
    <a href="../../os/core_os/time/os_settimeofday/">os_settimeofday</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Tasks</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/task/task/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/task/os_task_count/">os_task_count</a>
</li>
            
<li >
    <a href="../../os/core_os/task/os_task_info_get_next/">os_task_info_get_next</a>
</li>
            
<li >
    <a href="../../os/core_os/task/os_task_init/">os_task_init</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Event Queues</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/event_queue/event_queue/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/event_queue/os_eventq_get/">os_eventq_get</a>
</li>
            
<li >
    <a href="../../os/core_os/event_queue/os_eventq_init/">os_eventq_init</a>
</li>
            
<li >
    <a href="../../os/core_os/event_queue/os_eventq_put/">os_eventq_put</a>
</li>
            
<li >
    <a href="../../os/core_os/event_queue/os_eventq_remove/">os_eventq_remove</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Semaphores</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/semaphore/semaphore/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/semaphore/os_sem_init/">os_sem_init</a>
</li>
            
<li >
    <a href="../../os/core_os/semaphore/os_sem_pend/">os_sem_pend</a>
</li>
            
<li >
    <a href="../../os/core_os/semaphore/os_sem_release/">os_sem_release</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Mutexes</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/mutex/mutex/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/mutex/os_mutex_init/">os_mutex_init</a>
</li>
            
<li >
    <a href="../../os/core_os/mutex/os_mutex_pend/">os_mutex_pend</a>
</li>
            
<li >
    <a href="../../os/core_os/mutex/os_mutex_release/">os_mutex_release</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Memory Pools</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/memory_pool/memory_pool/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions/Macros</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/memory_pool/os_memblock_get/">os_memblock_get</a>
</li>
            
<li >
    <a href="../../os/core_os/memory_pool/os_mempool_init/">os_mempool_init</a>
</li>
            
<li >
    <a href="../../os/core_os/memory_pool/os_memblock_put/">os_memblock_put</a>
</li>
            
<li >
    <a href="../../os/core_os/memory_pool/OS_MEMPOOL_BYTES/">OS_MEMPOOL_BYTES</a>
</li>
            
<li >
    <a href="../../os/core_os/memory_pool/OS_MEMPOOL_SIZE/">OS_MEMPOOL_SIZE</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Heap</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/heap/heap/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/heap/os_free/">os_free</a>
</li>
            
<li >
    <a href="../../os/core_os/heap/os_malloc/">os_malloc</a>
</li>
            
<li >
    <a href="../../os/core_os/heap/os_realloc/">os_realloc</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Memory Buffers</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Mbuf</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/mbuf/mbuf/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions/Macros</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_PKTHDR/">OS_MBUF_PKTHDR</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_PKTHDR_TO_MBUF/">OS_MBUF_PKTHDR_TO_MBUF</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_PKTLEN/">OS_MBUF_PKTLEN</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_DATA/">OS_MBUF_DATA</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_USRHDR/">OS_MBUF_USRHDR</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_USRHDR_LEN/">OS_MBUF_USRHDR_LEN</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_LEADINGSPACE/">OS_MBUF_LEADINGSPACE</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/OS_MBUF_TRAILINGSPACE/">OS_MBUF_TRAILINGSPACE</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_adj/">os_mbuf_adj</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_append/">os_mbuf_append</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_concat/">os_mbuf_concat</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_copydata/">os_mbuf_copydata</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_copyinto/">os_mbuf_copyinto</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_dup/">os_mbuf_dup</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_extend/">os_mbuf_extend</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_free_chain/">os_mbuf_free_chain</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_get/">os_mbuf_get</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_get_pkthdr/">os_mbuf_get_pkthdr</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_memcmp/">os_mbuf_memcmp</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_off/">os_mbuf_off</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_pool_init/">os_mbuf_pool_init</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_prepend/">os_mbuf_prepend</a>
</li>
            
<li >
    <a href="../../os/core_os/mbuf/os_mbuf_pullup/">os_mbuf_pullup</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Msys</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/msys/msys/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/msys/os_msys_get/">os_msys_get</a>
</li>
            
<li >
    <a href="../../os/core_os/msys/os_msys_get_pkthdr/">os_msys_get_pkthdr</a>
</li>
            
<li >
    <a href="../../os/core_os/msys/os_msys_register/">os_msys_register</a>
</li>
            
<li >
    <a href="../../os/core_os/msys/os_msys_reset/">os_msys_reset</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">MQueue</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/mqueue/mqueue/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/mqueue/os_mqueue_init/">os_mqueue_init</a>
</li>
            
<li >
    <a href="../../os/core_os/mqueue/os_mqueue_get/">os_mqueue_get</a>
</li>
            
<li >
    <a href="../../os/core_os/mqueue/os_mqueue_put/">os_mqueue_put</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Sanity</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/sanity/sanity/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/sanity/os_sanity_check_init/">os_sanity_check_init</a>
</li>
            
<li >
    <a href="../../os/core_os/sanity/os_sanity_check_register/">os_sanity_check_register</a>
</li>
            
<li >
    <a href="../../os/core_os/sanity/os_sanity_check_reset/">os_sanity_check_reset</a>
</li>
            
<li >
    <a href="../../os/core_os/sanity/os_sanity_task_checkin/">os_sanity_task_checkin</a>
</li>
            
<li >
    <a href="../../os/core_os/sanity/os_sanity_task_init/">os_sanity_task_init</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Callouts</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/callout/callout/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/callout/os_callout_func_init/">os_callout_func_init</a>
</li>
            
<li >
    <a href="../../os/core_os/callout/os_callout_init/">os_callout_init</a>
</li>
            
<li >
    <a href="../../os/core_os/callout/os_callout_queued/">os_callout_queued</a>
</li>
            
<li >
    <a href="../../os/core_os/callout/os_callout_reset/">os_callout_reset</a>
</li>
            
<li >
    <a href="../../os/core_os/callout/os_callout_stop/">os_callout_stop</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Porting to your Platform</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/core_os/porting/port_os/">toc</a>
</li>
            
<li >
    <a href="../../os/core_os/porting/port_bsp/">BSP Porting</a>
</li>
            
<li >
    <a href="../../os/core_os/porting/port_mcu/">MCU Porting</a>
</li>
            
<li >
    <a href="../../os/core_os/porting/port_cpu/">CPU Porting</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Console</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/console/console/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/console/console_blocking_mode/">console_blocking_mode</a>
</li>
            
<li >
    <a href="../../os/modules/console/console_echo/">console_echo</a>
</li>
            
<li >
    <a href="../../os/modules/console/console_init/">console_init</a>
</li>
            
<li >
    <a href="../../os/modules/console/console_is_init/">console_is_init</a>
</li>
            
<li >
    <a href="../../os/modules/console/console_printf/">console_printf</a>
</li>
            
<li >
    <a href="../../os/modules/console/console_read/">console_read</a>
</li>
            
<li >
    <a href="../../os/modules/console/console_write/">console_write</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Shell</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/shell/shell/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/shell/shell_task_init/">shell_task_init</a>
</li>
            
<li >
    <a href="../../os/modules/shell/shell_cmd_register/">shell_cmd_register</a>
</li>
            
<li >
    <a href="../../os/modules/shell/shell_nlip_input_register/">shell_nlip_input_register</a>
</li>
            
<li >
    <a href="../../os/modules/shell/shell_nlip_output/">shell_nlip_output</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Bootloader</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/bootloader/bootloader/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/bootloader/boot_build_status/">boot_build_status</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_build_status_one/">boot_build_status_one</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_clear_status/">boot_clear_status</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_copy_area/">boot_copy_area</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_copy_image/">boot_copy_image</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_erase_area/">boot_erase_area</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_fill_slot/">boot_fill_slot</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_find_image_area_idx/">boot_find_image_area_idx</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_find_image_part/">boot_find_image_part</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_find_image_slot/">boot_find_image_slot</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_go/">boot_go</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_init_flash/">boot_init_flash</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_move_area/">boot_move_area</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_read_image_header/">boot_read_image_header</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_read_image_headers/">boot_read_image_headers</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_read_status/">boot_read_status</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_select_image_slot/">boot_select_image_slot</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_slot_addr/">boot_slot_addr</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_slot_to_area_idx/">boot_slot_to_area_idx</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_swap_areas/">boot_swap_areas</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_vect_delete_main/">boot_vect_delete_main</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_vect_delete_test/">boot_vect_delete_test</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_vect_read_main/">boot_vect_read_main</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_vect_read_one/">boot_vect_read_one</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_vect_read_test/">boot_vect_read_test</a>
</li>
            
<li >
    <a href="../../os/modules/bootloader/boot_write_status/">boot_write_status</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">File System</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">File System Abstraction</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/fs/fs/fs/">toc</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_return_codes/">Return Codes</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Data Structures</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/fs/fs/fs_ops/">struct fs_ops</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/fs/fs/fs_close/">fs_close</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_closedir/">fs_closedir</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_dirent_is_dir/">fs_dirent_is_dir</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_dirent_name/">fs_dirent_name</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_filelen/">fs_filelen</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_getpos/">fs_getpos</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_mkdir/">fs_mkdir</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_open/">fs_open</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_opendir/">fs_opendir</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_read/">fs_read</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_readdir/">fs_readdir</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_register/">fs_register</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_rename/">fs_rename</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_seek/">fs_seek</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_unlink/">fs_unlink</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fs_write/">fs_write</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fsutil_read_file/">fsutil_read_file</a>
</li>
            
<li >
    <a href="../../os/modules/fs/fs/fsutil_write_file/">fsutil_write_file</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Newtron Flash File System</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/fs/nffs/nffs/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Data Structures</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/fs/nffs/nffs_area_desc/">struct nffs_area_desc</a>
</li>
            
<li >
    <a href="../../os/modules/fs/nffs/nffs_config/">struct nffs_config</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/fs/nffs/nffs_detect/">nffs_detect</a>
</li>
            
<li >
    <a href="../../os/modules/fs/nffs/nffs_format/">nffs_format</a>
</li>
            
<li >
    <a href="../../os/modules/fs/nffs/nffs_init/">nffs_init</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/modules/fs/nffs/nffs_internals/">Internals</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/modules/fs/otherfs/">Other File Systems</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Hardware Abstraction Layer</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/hal/hal/">toc</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_architecture/">Architecture</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">API</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/hal/hal_api/">Summary</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_adc/hal_adc/">ADC</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_cputime/hal_cpu_timer/">CPU timer</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_dac/hal_dac/">DAC</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Flash memory</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/hal/hal_flash/hal_flash/">Overview</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_flash/hal_flash_int/">flash_int</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_flash/hal_flash_map/">flash_map</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/modules/hal/hal_gpio/hal_gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_i2c/hal_i2c/">I2C</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_pwm/hal_pwm/">PWM</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_spi/hal_spi/">SPI</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_system/hal_sys/">System</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_uart/hal_uart/">UART</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../os/modules/hal/hal_in_libraries/">Using HAL</a>
</li>
            
<li >
    <a href="../../os/modules/hal/hal_creation/">Creating HAL</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Test Utilities</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/testutil/testutil/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions/Macros</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/testutil/tu_init/">tu_init</a>
</li>
            
<li >
    <a href="../../os/modules/testutil/test_assert/">TEST_ASSERT</a>
</li>
            
<li >
    <a href="../../os/modules/testutil/test_pass/">TEST_PASS</a>
</li>
            
<li >
    <a href="../../os/modules/testutil/test_suite/">TEST_SUITE</a>
</li>
            
<li >
    <a href="../../os/modules/testutil/test_case/">TEST_CASE</a>
</li>
            
<li >
    <a href="../../os/modules/testutil/test_decl/">TEST_CASE_DECL</a>
</li>
            
<li >
    <a href="../../os/modules/testutil/tu_restart/">tu_restart</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Image Manager</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/imgmgr/imgmgr/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/imgmgr/imgmgr_module_init/">imgmgr_module_init</a>
</li>
            
<li >
    <a href="../../os/modules/imgmgr/imgr_ver_parse/">imgr_ver_parse</a>
</li>
            
<li >
    <a href="../../os/modules/imgmgr/imgr_ver_str/">imgr_ver_str</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
<li >
    <a href="../../os/modules/baselibc/">Baselibc library</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Embedded Lua</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/elua/elua/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/elua/lua_init/">lua_init</a>
</li>
            
<li >
    <a href="../../os/modules/elua/lua_main/">lua_main</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">JSON</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/json/json/">toc</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Functions</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/json/json_encode_object_entry/">json_encode_object_entry</a>
</li>
            
<li >
    <a href="../../os/modules/json/json_encode_object_finish/">json_encode_object_finish</a>
</li>
            
<li >
    <a href="../../os/modules/json/json_encode_object_key/">json_encode_object_key</a>
</li>
            
<li >
    <a href="../../os/modules/json/json_encode_object_start/">json_encode_object_start</a>
</li>
            
<li >
    <a href="../../os/modules/json/json_read_object/">json_read_object</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Stats</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/stats/stats/">toc</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Logs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/modules/logs/logs/">toc</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">BLE User Guide</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../network/ble/ble_intro/">NimBLE Introduction</a>
</li>
            
<li >
    <a href="../../network/ble/ble_sec/">NimBLE Security</a>
</li>
            
<li >
    <a href="../../network/ble/nimble_setup/">Set up application</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Initialize stack</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../network/ble/ini_stack/ble_ini_intro/">toc</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_add_cpu/">Add cputime</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_mempool/">Create mem pool</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_devadd/">Initialize device addr</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_statpkg/">Initialize stats pkg</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_consolepkg/">Initialize console pkg</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_controller_ini/">Initialize controller</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_parent_ini/">Initialize parent task</a>
</li>
            
<li >
    <a href="../../network/ble/ini_stack/ble_host_ini/">Initialize host</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">API for bletiny app</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../network/ble/bletiny_api/">toc</a>
</li>
            
<li >
    <a href="../../network/ble/bletiny/bletiny_GAP/">GAP in bletiny</a>
</li>
            
<li >
    <a href="../../network/ble/bletiny/bletiny_GATT/">GATT in bletiny</a>
</li>
            
<li >
    <a href="../../network/ble/bletiny/bletiny_advdata/">Advertisement Data Fields</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Newt Tool Guide</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../newt_intro/">toc</a>
</li>
            
<li class="active">
    <a href="./">Newt Theory of Ops</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Command Guide</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../newt_ops/">toc</a>
</li>
            
<li >
    <a href="../command_list/newt_build/">newt build</a>
</li>
            
<li >
    <a href="../command_list/newt_clean/">newt clean</a>
</li>
            
<li >
    <a href="../command_list/newt_create_image/">newt create-image</a>
</li>
            
<li >
    <a href="../command_list/newt_debug/">newt debug</a>
</li>
            
<li >
    <a href="../command_list/newt_help/">newt help</a>
</li>
            
<li >
    <a href="../command_list/newt_info/">newt info</a>
</li>
            
<li >
    <a href="../command_list/newt_install/">newt install</a>
</li>
            
<li >
    <a href="../command_list/newt_load/">newt load</a>
</li>
            
<li >
    <a href="../command_list/newt_new/">newt new</a>
</li>
            
<li >
    <a href="../command_list/newt_run/">newt run</a>
</li>
            
<li >
    <a href="../command_list/newt_size/">newt size</a>
</li>
            
<li >
    <a href="../command_list/newt_target/">newt target</a>
</li>
            
<li >
    <a href="../command_list/newt_test/">newt test</a>
</li>
            
<li >
    <a href="../command_list/newt_upgrade/">newt upgrade</a>
</li>
            
<li >
    <a href="../command_list/newt_version/">newt version</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Newt Manager Guide</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../newtmgr/overview/">toc</a>
</li>
            
<li >
    <a href="../../newtmgr/installing/">Install</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../known_issues/">Known Issues</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Appendix <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../faq/how_to_edit_docs/">Edit Docs</a>
</li>
                                    
<li >
    <a href="../../faq/answers/">FAQ</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../newt_intro/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../newt_ops/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#newt-tool-theory-of-operations">Newt Tool - Theory of Operations</a></li>
            <li><a href="#building-dependencies">Building dependencies</a></li>
            <li><a href="#resolving-dependencies">Resolving dependencies</a></li>
            <li><a href="#producing-artifacts">Producing artifacts</a></li>
            <li><a href="#downloaddebug-support">Download/Debug Support</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="newt-tool-theory-of-operations">Newt Tool - Theory of Operations</h2>
<p>Newt has a fairly smart package manager that can read a directory tree, build a dependency tree, and emit the right build artifacts.</p>
<h3 id="building-dependencies">Building dependencies</h3>
<p>Newt can read a directory tree, build a dependency tree, and emit the right build artifacts.  An example newt source tree is in incubator-mynewt-blinky/develop:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>$ tree -L 3 
.
├── DISCLAIMER
├── LICENSE
├── NOTICE
├── README.md
<span style="background-color: #ffffcc">├── apps
</span>│   └── blinky
│       ├── pkg.yml
│       └── src
├── project.yml
<span style="background-color: #ffffcc">└── targets
</span>     ├── my_blinky_sim
     │   ├── pkg.yml
     │   └── target.yml
     └── unittest
         ├── pkg.yml
         └── target.yml

6 directories, 10 files
</pre></div>


<p><br></p>
<p>When Newt sees a directory tree that contains a "project.yml" file it knows that it is in the base directory of a project, and automatically builds a package tree. You can see that there are two essential package directories, "apps" and "targets." </p>
<p><br></p>
<h4 id="apps-package-directory">"apps" Package Directory</h4>
<p><code>apps</code> is where applications are stored, and applications are where the main() function is contained.  Along with the <code>targets</code> directory, <code>apps</code> represents the top-level of the build tree, and define the dependencies and features for the rest of the system.</p>
<p>The app definition is contained in a <code>pkg.yml</code> file. An example of blinky's <code>pkg.yml</code> file is:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>$ more apps/blinky/pkg.yml
&lt;snip&gt;
pkg.name: apps/blinky
pkg.vers: 0.8.0
pkg.description: Basic example application which blinks an LED.
pkg.author: &quot;Apache Mynewt &lt;dev@mynewt.incubator.apache.org&gt;&quot;
pkg.homepage: &quot;http://mynewt.apache.org/&quot;
pkg.repository:
pkg.keywords:

pkg.deps:
     - &quot;@apache-mynewt-core/libs/os&quot;
     - &quot;@apache-mynewt-core/hw/hal&quot;
     - &quot;@apache-mynewt-core/libs/console/full&quot;
</pre></div>


<p><br></p>
<p>This file says that the name of the package is apps/blinky, and it 
depends on libs/os, hw/hal and libs/console/full packages.</p>
<p><strong>NOTE:</strong> @apache-mynewt-core is a repository descriptor, and this will be 
covered in the "repository" section. </p>
<p><br></p>
<h4 id="targets-package-directory">"targets" Package Directory</h4>
<p><code>targets</code> is where targets are stored, and each target is a collection of parameters that must be passed to Newt in order to generate a reproducible build. Along with the <code>apps</code> directory, <code>targets</code> represents the top of the build tree. Any packages or parameters specified at the target level cascades down to all dependencies.</p>
<p>Most targets consist of:</p>
<ul>
<li>app: The application to build</li>
<li>bsp: The board support package to combine with that application</li>
<li>build_profile: Either debug or optimized.</li>
</ul>
<p>The <code>my_blinky_sim</code> target in the example below has the following settings:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>$ newt target show
targets/my_blinky_sim
    app=apps/blinky
    bsp=@apache-mynewt-core/hw/bsp/native
    build_profile=debug
$ ls my_blinky_sim/
pkg.yml     target.yml
</pre></div>


<p>In general, the three basic parameters of a target (<code>app</code>, <code>bsp</code>, and <code>build_profile</code>) are stored in the <code>target.yml</code> file in that target's build directory under <code>targets</code>. You will also see a <code>pkg.yml</code> file in the same directory. Since targets are packages, a <code>pkg.yml</code> is expected. It contains typical package descriptors, dependencies, and additional parameters such as the following:</p>
<ul>
<li>Cflags: Any additional compiler flags you might want to specify to the build</li>
<li>Aflags: Any additional assembler flags you might want to specify to the build</li>
<li>Lflags: Any additional linker flags you might want to specify to the build</li>
<li>features: Any system level features you want to enable.</li>
</ul>
<p><br></p>
<h3 id="resolving-dependencies">Resolving dependencies</h3>
<p>When newt is told to build a project, it will:</p>
<ul>
<li>find the top-level project.yml file</li>
<li>recurse the packages in the package tree, and build a list of all 
source packages</li>
</ul>
<p>Newt then looks at the target that the user set, for example, blinky_sim:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>$ more targets/my_blinky_sim/
pkg.yml     target.yml
$ more targets/my_blinky_sim/target.yml
### Target: targets/my_blinky_sim
target.app: &quot;apps/blinky&quot;
target.bsp: &quot;@apache-mynewt-core/hw/bsp/native&quot;
target.build_profile: &quot;debug&quot;
</pre></div>


<p><br></p>
<p>The target specifies two major things:</p>
<ul>
<li>Application (target.app): The application to build</li>
<li>Board Support Package (target.bsp): The board support package to build 
along with that application.</li>
</ul>
<p>Newt goes and builds the dependency tree specified by all the packages. While building this tree, it does a few other things:</p>
<ul>
<li>Any package that depends on another package, automatically gets the include directories from the package it includes.  Include directories in the
newt structure must always be prefixed by the package name. For example, libs/os has the following include tree and its include directory files contains the package name "os" before any header files.  This is so in order to avoid any header file conflicts.</li>
</ul>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>$ tree
.
├── README.md
├── include
│   └── os
│       ├── arch
│       │   ├── cortex_m0
│       │   │   └── os
│       │   │       └── os_arch.h
│       │   ├── cortex_m4
│       │   │   └── os
│       │   │       └── os_arch.h
│       │   └── sim
│       │       └── os
│       │           └── os_arch.h
│       ├── endian.h
│       ├── os.h
│       ├── os_callout.h
│       ├── os_cfg.h
│       ├── os_eventq.h
│       ├── os_heap.h
│       ├── os_malloc.h
│       ├── os_mbuf.h
│       ├── os_mempool.h
│       ├── os_mutex.h
│       ├── os_sanity.h
│       ├── os_sched.h
│       ├── os_sem.h
│       ├── os_task.h
│       ├── os_test.h
│       ├── os_time.h
│       └── queue.h
├── pkg.yml
└── src
    ├── arch
&lt;snip&gt;
</pre></div>


<p><br></p>
<ul>
<li>
<p>API requirements are validated.  Packages can export APIs they 
implement, (i.e. pkg.api: hw-hal-impl), and other packages can require 
those APIs (i.e. pkg.req_api: hw-hal-impl).</p>
</li>
<li>
<p>"Features" options are supported.  Packages can change what dependencies 
they have, or what flags they are using based upon what features are enabled in the system.  As an example, many packages will add additional software, based on whether the shell package is present.  To do this, they can overwrite cflags or deps based upon the shell "feature."</p>
</li>
</ul>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>pkg.cflags.SHELL: -DSHELL_PRESENT
</pre></div>


<p><br></p>
<p>In order to properly resolve all dependencies in the build system, Newt recursively processes the package dependencies until there are no new dependencies or features (because features can add dependencies.)  And it builds a big list of all the packages that need to be build.</p>
<p>Newt then goes through this package list, and builds every package into 
an archive file.</p>
<p><strong>NOTE:</strong> The Newt tool generates compiler dependencies for all of these packages, and only rebuilds the packages whose dependencies have changed. Changes in package &amp; project dependencies are also taken into account. It is smart, after all!</p>
<h3 id="producing-artifacts">Producing artifacts</h3>
<p>Once Newt has built all the archive files, it then links the archive files together.  The linkerscript to use is specified by the board support package (BSP.)</p>
<p>NOTE: One common use of the "features" option above is to overwrite 
which linkerscript is used, based upon whether or not the BSP is being 
build for a raw image, bootable image or bootloader itself.</p>
<p>The newt tool places all of it's artifacts into the bin/ directory at 
the top-level of the project, prefixed by the target name being built, 
for example:</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>$ tree -L 4 bin/
bin/
└── my_blinky_sim
     ├── apps
     │   └── blinky
     │       ├── blinky.a
     │       ├── blinky.a.cmd
     │       ├── blinky.elf
     │       ├── blinky.elf.cmd
     │       ├── blinky.elf.dSYM
     │       ├── blinky.elf.lst
     │       ├── main.d
     │       ├── main.o
     │       └── main.o.cmd
     ├── hw
     │   ├── bsp
     │   │   └── native
     │   ├── hal
     │   │   ├── flash_map.d
     │   │   ├── flash_map.o
&lt;snip&gt;
</pre></div>


<p><br></p>
<p>As you can see, a number of files are generated:</p>
<ul>
<li>Archive File</li>
<li>*.cmd: The command use to generate the object or archive file</li>
<li>*.lst: The list file where symbols are located</li>
<li>*.o The object files that get put into the archive file</li>
</ul>
<h3 id="downloaddebug-support">Download/Debug Support</h3>
<p>Once a target has been build, there are a number of helper functions 
that work on the target.  These are:</p>
<ul>
<li><strong>download</strong>     Download built target to board</li>
<li><strong>debug</strong>        Open debugger session to target</li>
<li>size         Size of target components</li>
<li>create-image Add image header to target binary</li>
</ul>
<p>Download and debug handles driving GDB and the system debugger.  These 
commands call out to scripts that are defined by the BSP.</p>
<div class="codehilite" style="background: #ffffff"><pre style="line-height: 125%"><span></span>$ more repos/apache-mynewt-core/hw/bsp/nrf52pdk/nrf52pdk_debug.sh
&lt;snip&gt;
#
if [ $# -lt 1 ]; then
     echo &quot;Need binary to download&quot;
     exit 1
fi

FILE_NAME=$2.elf
GDB_CMD_FILE=.gdb_cmds

echo &quot;Debugging&quot; $FILE_NAME

# Monitor mode. Background process gets it&#39;s own process group.
set -m
JLinkGDBServer -device nRF52 -speed 4000 -if SWD -port 3333 -singlerun &amp;
set +m

echo &quot;target remote localhost:3333&quot; &gt; $GDB_CMD_FILE

arm-none-eabi-gdb -x $GDB_CMD_FILE $FILE_NAME

rm $GDB_CMD_FILE
</pre></div>


<p>The idea is that every BSP will add support for the debugger environment 
for that board.  That way common tools can be used across various development boards and kits.</p>
<p><strong>NOTE:</strong> Both for compiler definitions and debugger scripts, the plan is to 
create Dockerizable containers of these toolchains.  This should make 
things much easier to support across Mac OS X, Linux and Windows.  Newt 
will know how to call out to Docker to perform these processes.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Apache Mynewt (incubating) is available under Apache License, version 2.0.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
